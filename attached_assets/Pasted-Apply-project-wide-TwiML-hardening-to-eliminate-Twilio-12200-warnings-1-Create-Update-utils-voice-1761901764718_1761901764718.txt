Apply project-wide TwiML hardening to eliminate Twilio 12200 warnings:

1) Create/Update utils/voice.ts
--------------------------------
export const VOICE_NAME = process.env.VOICE_NAME || "Polly.Olivia-Neural";
export const FALLBACK_VOICE = "alice";

export function ttsClean(s: string | null | undefined) {
  if (!s) return "";
  return String(s)
    .replace(/<[^>]*>/g, " ")       // strip any SSML
    .replace(/[^\x20-\x7E]/g, " ")  // ASCII only
    .replace(/[“”‘’]/g, '"')
    .replace(/[?!,:;()]/g, "")
    .replace(/\s+/g, " ")
    .trim();
}

export function say(node: any, text: string) {
  const cleaned = ttsClean(text);
  if (!cleaned) return;
  try { node.say({ voice: VOICE_NAME }, cleaned); }
  catch { node.say({ voice: FALLBACK_VOICE }, cleaned); }
}

export function pause(node: any, secs = 1) {
  const n = Number.isInteger(secs) ? secs : 1;
  node.pause({ length: n });
}

2) Sweep all TwiML builders:
- Replace any direct .say(...) with say(node, text).
- Replace any <Pause length="0.5"> with pause(node, 1).
- Remove ALL of the following:
  - SSML usage in Say (e.g., <speak>…</speak>)
  - bargeIn on <Say> and <Gather>
  - language on <Say> and <Gather>

3) Standardize <Gather> creation everywhere:
const g = vr.gather({
  input: ["speech"],
  timeout: 5,
  speechTimeout: "auto",
  actionOnEmptyResult: true,
  action: handleUrl,
  method: "POST",
});

Then:
say(g, "Hello and welcome to your clinic how can I help you today");
pause(g, 1);
vr.redirect({ method: "POST" }, timeoutUrl);

4) Validate pause usage:
- Ensure ALL pauses use integers only: pause(node, 1), pause(node, 2), etc.

5) Defensive guard:
- If any code path may pass empty or token-like text (e.g., redirect_to_wizard), check before say() and skip speaking.

6) Add a /api/voice/ping test route if not present:
- Respond with TwiML containing one <Say> using say() helper and no Gather.
- Use it to verify no 12200 occurs via browser Request Inspector.

7) Redeploy and test:
- Call number; in Twilio Request Inspector confirm:
  - No XML Validation warnings
  - No "length must be integer"
  - No "Say: Invalid text"